/* =========================================================================
   5-FU App — Theme revamp (palette from the provided mock)
   ========================================================================= */
:root{
  --bg:#0C3B2E; --surface:#0F4A3B; --panel:#133F34; --card:#153F34;
  --text:#EAF4EE; --text-muted:#BFD4C7; --text-dim:#9DB8AA;
  --primary:#6D9773; --primary-600:#5B8464; --primary-700:#4A6E54;
  --accent:#FFBA00; --accent-700:#B46617;
  --error:#E05353; --success:#58C58C; --warning:#FFBA00;
  --border:rgba(255,255,255,0.12); --border-strong:rgba(255,255,255,0.22);
  --input-bg:#0F4236; --input-focus:#6D9773;
  --pill-bg:rgba(255,255,255,0.06); --pill-text:#EAF4EE;
  --shadow-1:0 6px 24px rgba(0,0,0,0.28); --shadow-2:0 10px 34px rgba(0,0,0,0.35);
  --radius-sm:8px; --radius:12px; --radius-lg:18px;
  --table-header:rgba(255,255,255,0.06); --table-row:rgba(255,255,255,0.03); --table-row-alt:rgba(255,255,255,0.05);

  /* grade colors */
  --g0:#1e3a34;     /* calm */
  --g1:#2d6a4f;     /* mild */
  --g2:#7c9a43;     /* moderate */
  --g3:#b58900;     /* severe - amber */
  --g4:#b53a3a;     /* critical - red */
}

/* Base */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font: 14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  color: var(--text);
  background: linear-gradient(180deg, var(--bg) 0%, #0E3A2E 100%);
}

/* Layout */
.container{ max-width:1100px; margin:0 auto; padding:24px; }
.section-title{ display:flex; align-items:center; justify-content:space-between; margin:12px 0 8px; }
.section-title h3{ margin:0; font-size:18px; font-weight:600; color:var(--text); } /* larger section titles */
.muted{ color:var(--text-muted); }
.text-lg{ font-size:20px; }
.font-semibold{ font-weight:600; }
.flex{ display:flex; }
.grid{ display:grid; }
.gap-1{ gap:8px; }
.gap-2{ gap:12px; }
.items-center{ align-items:center; }
.justify-between{ justify-content:space-between; }
.mb-1{ margin-bottom:8px; }
.mt-1{ margin-top:8px; }
.mt-2{ margin-top:16px; }

/* Cards */
.card{
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-1); padding: 12px;
}
.card.soft{ background: rgba(255,255,255,0.04); border-color: var(--border); }

/* Inputs */
input[type="text"], input[type="number"], input[type="date"], select, textarea{
  width:100%; padding:10px 12px; color: var(--text); background: var(--input-bg);
  border:1px solid var(--border); border-radius: var(--radius-sm); outline: none; transition: border-color .15s ease, box-shadow .15s ease, background .15s;
}
textarea{ min-height: 90px; resize: vertical; }
input::placeholder, textarea::placeholder{ color: var(--text-dim); }
input:focus, select:focus, textarea:focus{ border-color: var(--input-focus); box-shadow: 0 0 0 2px rgba(109,151,115,0.25); }
.form-group label{ display:block; margin-bottom:6px; color:var(--text-muted); font-size:12px; letter-spacing:.2px; }

/* Buttons */
.btn{
  --btn-bg: var(--pill-bg); --btn-text: var(--text);
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 14px; border-radius: 999px; background: var(--btn-bg); color: var(--btn-text);
  border:1px solid var(--border); cursor:pointer; transition: transform .05s ease, background .2s ease, border-color .2s;
}
.btn:hover{ transform: translateY(-1px); border-color: var(--border-strong); }
.btn:active{ transform: translateY(0); }
.btn-primary{ --btn-bg: var(--primary); --btn-text: #0F2A21; border-color: transparent; font-weight:600; }
.btn-primary:hover{ background: var(--primary-600); }
.btn-primary:active{ background: var(--primary-700); }
.btn-danger{ --btn-bg: #B33A3A; --btn-text: #fff; border-color: rgba(0,0,0,0.1); }
.btn-icon{ width:36px; height:36px; padding:0; border-radius:999px; font-size:18px; }

/* Pills / badges */
.pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background: var(--pill-bg); color: var(--pill-text); border:1px solid var(--border); font-size:12px; }
.badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; background:rgba(255,186,0,0.15); color:#FFD977; font-weight:600; font-size:11px; }

/* Table */
.table{ width:100%; border-collapse: separate; border-spacing:0; overflow:hidden; border-radius: var(--radius); border:1px solid var(--border); }
.table thead th{ background: var(--table-header); color: var(--text-muted); font-weight:600; text-align:left; font-size:12px; padding:10px 12px; border-bottom:1px solid var(--border); }
.table tbody td{ padding:10px 12px; border-bottom:1px solid var(--border); background: var(--table-row); }
.table tbody tr:nth-child(even) td{ background: var(--table-row-alt); }
.table tbody tr{ cursor: pointer; transition: background .15s ease; }
.table tbody tr:hover td{ background: rgba(255,255,255,0.08); }

/* Header bar (filters) — sticky فوق الجدول */
.header-bar{
  position: sticky; top: 0; z-index: 50;
  background: linear-gradient(90deg, rgba(109,151,115,0.06), rgba(255,186,0,0.05));
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px; margin-top: 8px; margin-bottom: 10px;
}

/* Filter chip */
.filter-chip{
  display:inline-flex; align-items:center; gap:8px;
  background: rgba(255,186,0,0.18); color: #FFD877;
  border:1px solid rgba(255,186,0,0.35);
  padding: 8px 12px; border-radius: 999px; cursor: pointer; user-select:none;
}
.filter-chip input{ accent-color: var(--accent); }

/* Modal (generic) */
.modal-wrap{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:999; }
.modal-overlay{ position:absolute; inset:0; background: rgba(0,0,0,0.45); }
.modal{
  position:relative; z-index:1;
  width:min(780px, calc(100vw - 28px));
  max-height: calc(100vh - 28px);
  overflow:auto; background: var(--surface);
  border:1px solid var(--border-strong); border-radius: 22px; box-shadow: var(--shadow-2);
}
.modal-header{ position:sticky; top:0; padding:14px 16px; background: linear-gradient(180deg, var(--surface) 0%, #114336 100%); border-bottom:1px solid var(--border); border-top-left-radius: 22px; border-top-right-radius: 22px; }
.modal-body{ padding:16px; }
.modal-footer{ position:sticky; bottom:0; display:flex; gap:10px; justify-content:flex-end; padding:12px 16px; background: linear-gradient(0deg, var(--surface) 0%, #114336 100%); border-top:1px solid var(--border); border-bottom-left-radius: 22px; border-bottom-right-radius: 22px; }

/* Modal header alerts (visual only) */
.modal-header.warn{ background: linear-gradient(180deg, rgba(255,186,0,0.25), transparent); }
.modal-header.alert{ background: linear-gradient(180deg, rgba(229,83,83,0.28), transparent); }

/* Links */
a{ color: var(--accent); text-decoration: none; }
a:hover{ text-decoration: underline; }

/* Scrollbars */
*::-webkit-scrollbar{ width:12px; height:12px; }
*::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.14); border-radius: 999px; border:3px solid transparent; background-clip: padding-box; }
*::-webkit-scrollbar-track{ background: transparent; }

/* Action buttons small inside tables */
.table .btn{ min-width: 36px; padding:6px 8px; }

/* ==== Enhanced table host & sticky first column ==== */
.table-host{ overflow: auto; max-height: 420px; border-radius: var(--radius); }

/* Grade bar locking */
.grade-bar.disabled{ opacity: .55; pointer-events: none; }

/* Sticky form actions */
.form-sticky-actions{
  position: sticky;
  bottom: -1px;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  padding-top: 8px;
  margin-top: 8px;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,0.12));
  border-top: 1px solid var(--border);
}

/* Badge hidden helper */
#ph_due_badge.hidden{ display:none; }

/* =========================
   Grade bar color coding
   ========================= */
.grade-btn{
  border:1px dashed rgba(255,255,255,0.18); background:var(--input-bg); color:var(--text);
  padding:.35rem .55rem; border-radius:999px; font-weight:700; font-size:.9rem; cursor:pointer;
  transition: background .15s ease, border-color .15s ease, transform .05s ease;
}
.grade-btn[data-grade="G0"]{ background: var(--g0); border-color: rgba(255,255,255,0.12); }
.grade-btn[data-grade="G1"]{ background: var(--g1); border-color: rgba(255,255,255,0.12); }
.grade-btn[data-grade="G2"]{ background: var(--g2); border-color: rgba(0,0,0,0.15); }
.grade-btn[data-grade="G3"]{ background: var(--g3); color:#1f1400; border-color: rgba(0,0,0,0.2); }
.grade-btn[data-grade="G4"]{ background: var(--g4); }
.grade-btn.active{ border-style:solid; box-shadow: 0 0 0 2px rgba(255,255,255,0.12) inset; transform: translateY(-1px); }

/* =========================
   Shimmer loading skeleton
   ========================= */
@keyframes shimmer{
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}
.shimmer{
  display:block; height:12px; width:100%;
  background: linear-gradient(to right, rgba(255,255,255,0.06) 8%, rgba(255,255,255,0.14) 18%, rgba(255,255,255,0.06) 33%);
  background-size: 800px 104px; border-radius: 6px;
  animation: shimmer 1.1s linear infinite forwards;
}

/* =========================
   Due state row highlights
   ========================= */
tr.row-due-today td{ background: rgba(255,186,0,0.16) !important; }
tr.row-overdue td{ background: rgba(229,83,83,0.16) !important; }
tr.row-due-today:hover td, tr.row-overdue:hover td{ filter: brightness(1.05); }

/* =========================
   Toast (visual only; used by events)
   ========================= */
.toast{
  padding: 10px 12px;
  border-radius: 10px;
  box-shadow: var(--shadow-1);
  color: #0F2A21;
  font-weight: 600;
  border: 1px solid var(--border);
}
.toast.success{ background:#D1FAE5; }
.toast.warn{ background:#FFF3CD; }
.toast.error{ background:#F8D7DA; }
